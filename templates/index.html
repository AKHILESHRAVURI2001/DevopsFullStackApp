{% extends "base.html" %}
{% block content %}
<h2>Documents</h2>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Title</th>
      <th>Created</th>
      <th>File</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for d in docs %}
      <tr>
        <td>{{ d.title }}</td>
        <td>{{ d.created_at }}</td>
        <td>
          {% if d.s3_key %}
            <a href="{{ url_for('file_link', doc_id=d.id) }}">{{ d.filename }}</a>
          {% else %}
            <span class="text-muted">No file</span>
          {% endif %}
        </td>
        <td>
          <a class="btn btn-sm btn-primary" href="{{ url_for('edit', doc_id=d.id) }}">Edit</a>
          <a class="btn btn-sm btn-secondary" href="{{ url_for('upload', doc_id=d.id) }}">Upload</a>
          <form method="post" action="{{ url_for('delete', doc_id=d.id) }}" style="display:inline-block;">
            <button class="btn btn-sm btn-danger" onclick="return confirm('Delete?')">Delete</button>
          </form>
        </td>
      </tr>
    {% else %}
      <tr>
        <td colspan="4">No documents yet.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
